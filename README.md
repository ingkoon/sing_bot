# 🎵 sing_bot — Discord Music Bot (Python)

> 유튜브에서 음악을 검색하고 재생할 수 있는 디스코드 음악 봇입니다.  
> py-cord(discord.py) + yt-dlp + ffmpeg 기반으로 동작하며,  
> 반응형 명령어와 큐 시스템을 지원합니다.
> 
[디스코드 링크](https://discord.com/oauth2/authorize?client_id=1432225375072555058&permissions=8&integration_type=0&scope=bot)

---



## 🚀 주요 기능

| 명령어 | 설명 |
|--------|------|
| `!입장` | 현재 사용자가 있는 음성 채널에 봇을 입장시킵니다. |
| `!나가기` | 봇을 음성 채널에서 내보냅니다. 대기열이 모두 초기화됩니다. |
| `!p <검색어>` | 유튜브에서 검색어를 찾아 첫 번째 결과를 재생하거나 큐에 추가합니다. |
| `!p <유튜브URL>` | 유튜브 링크를 직접 재생합니다. (URL 검증 포함) |
| `!skip` | 현재 재생 중인 곡을 건너뛰고 다음 곡으로 넘어갑니다. 다음 곡이 없으면 퇴장합니다. |
| `!list` / `!queue` | 현재 재생 중인 곡과 대기 중인 곡 리스트를 보여줍니다. |
| `!remove <번호>` | 대기열에서 해당 번호의 곡을 제거합니다. |
| `!shuffle` | 현재 대기열의 순서를 무작위로 섞습니다. |
| `!search <검색어>` | 상위 5개의 검색 결과를 표시하고, 1️⃣~5️⃣ 리액션 중 하나를 선택하면 해당 곡을 큐에 추가합니다. |

---

## 🧠 동작 개요

1. **유튜브 검색 / URL 분석**  
   - `yt-dlp`를 이용해 검색어나 URL로부터 오디오 스트림 정보를 추출합니다.  
   - SABR 스트리밍 이슈 방지를 위해 `compat_opts=["no-youtube-sabr"]` 옵션을 사용합니다.

2. **음원 재생 및 큐 관리**  
   - 봇이 음성 채널에 연결되어 있지 않다면 자동으로 입장합니다.  
   - 새 명령어 입력 시 큐에 곡을 추가하고, 재생 중이 아니라면 자동으로 다음 곡 재생을 시작합니다.  
   - ffmpeg의 `-reconnect` 옵션을 통해 스트리밍 끊김 시 재연결을 시도합니다.

3. **재생 완료 처리**  
   - 곡이 종료되면 `after_play` 콜백을 통해 다음 곡으로 자동 전환됩니다.  
   - 더 이상 재생할 곡이 없다면 봇은 일정 시간 후 자동으로 퇴장합니다.

---

## ⚙️ 설치 및 실행

### 1. 의존성 설치
```bash
brew install ffmpeg
brew install opus
pip install -U discord.py yt-dlp pynacl
